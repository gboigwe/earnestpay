[profile.default]
src = "contracts/src"
out = "contracts/out"
libs = ["node_modules"]
test = "contracts/test"
script = "contracts/script"
cache_path = "contracts/cache"
broadcast = "contracts/broadcast"

# Optimizer settings (optimized for Base)
optimizer = true
optimizer_runs = 200
via_ir = true
bytecode_hash = "none"

# Base network RPC URLs with fallbacks
[rpc_endpoints]
base = "https://mainnet.base.org"
base_sepolia = "https://sepolia.base.org"
base_fallback = "https://base.llamarpc.com"
base_sepolia_fallback = "https://base-sepolia.blockpi.network/v1/rpc/public"

# Etherscan API keys for verification
[etherscan]
base = { key = "${BASESCAN_API_KEY}", url = "https://api.basescan.org/api" }
base_sepolia = { key = "${BASESCAN_API_KEY}", url = "https://api-sepolia.basescan.org/api" }

# Solidity version and settings
solc_version = "0.8.20"
evm_version = "paris"

# Gas reporting
gas_reports = ["*"]
gas_reports_ignore = ["test/**"]

# Test settings
fuzz = { runs = 256 }
invariant = { runs = 256 }

# Formatter settings
[fmt]
line_length = 100
tab_width = 4
bracket_spacing = true
int_types = "long"

# Documentation
[doc]
out = "docs"
title = "EarnestPay Smart Contracts"
homepage = "https://earnestpay.com"

# CI profile (faster, less thorough)
[profile.ci]
fuzz = { runs = 10 }
invariant = { runs = 10 }

# Production profile (maximum optimization)
[profile.production]
optimizer_runs = 1000000
via_ir = true
